<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mujoco_ros_utils: &lt;a href=&quot;https://github.com/isri-aist/MujocoRosUtils&quot;&gt;MujocoRosUtils&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mujoco_ros_utils
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a href="https://github.com/isri-aist/MujocoRosUtils">MujocoRosUtils</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ROS-based MuJoCo utilities</p>
<p><a href="https://github.com/isri-aist/MujocoRosUtils/actions/workflows/ci.yaml"><object type="image/svg+xml" data="https://github.com/isri-aist/MujocoRosUtils/actions/workflows/ci.yaml/badge.svg" style="pointer-events: none;">CI</object></a> <a href="https://isri-aist.github.io/MujocoRosUtils/"><img src="https://img.shields.io/badge/doxygen-online-brightgreen?logo=read-the-docs&amp;style=flat" alt="Documentation" class="inline"/></a> <a href="https://github.com/isri-aist/MujocoRosUtils/blob/master/LICENSE"><img src="https://img.shields.io/github/license/isri-aist/MujocoRosUtils" alt="LICENSE" class="inline"/></a></p>
<p><a href="https://github.com/isri-aist/MujocoRosUtils/assets/6636600/6cc3bc6c-113d-4a1d-97f5-d75b1000fc8a">https://github.com/isri-aist/MujocoRosUtils/assets/6636600/6cc3bc6c-113d-4a1d-97f5-d75b1000fc8a</a></p>
<h1>Features</h1>
<ul>
<li>You can retrieve body poses and camera images, send commands to actuators, and apply external forces to the body in MuJoCo via ROS interfaces.</li>
<li>Since it is in plugin style, you can use it without rebuilding MuJoCo from the source.</li>
</ul>
<h1>Install</h1>
<h2>Requirements</h2>
<ul>
<li>Compiler supporting C++17</li>
<li>Tested with <code>Ubuntu 20.04 / ROS Noetic</code></li>
</ul>
<h2>Dependencies</h2>
<ul>
<li><a href="https://github.com/deepmind/mujoco">MuJoCo</a> (&gt;= 2.3.5)</li>
</ul>
<h2>Installation procedure</h2>
<div class="fragment"><div class="line"># Setup catkin workspace.</div>
<div class="line">$ mkdir -p ${HOME}/ros/ws_mujoco/src</div>
<div class="line">$ cd ${HOME}/ros/ws_mujoco</div>
<div class="line">$ wstool init src</div>
<div class="line">$ wstool set -t src isri-aist/MujocoRosUtils git@github.com:isri-aist/MujocoRosUtils.git --git -y</div>
<div class="line">$ wstool update -t src</div>
<div class="line"># Install dependent packages.</div>
<div class="line">$ source /opt/ros/${ROS_DISTRO}/setup.bash</div>
<div class="line">$ rosdep install -y -r --from-paths src --ignore-src</div>
<div class="line"># Build a package.</div>
<div class="line">$ catkin init</div>
<div class="line">$ catkin config --extend /opt/ros/${ROS_DISTRO}</div>
<div class="line">$ catkin build mujoco_ros_utils -DCMAKE_BUILD_TYPE=RelWithDebInfo -DMUJOCO_ROOT_DIR=&lt;absolute path to MuJoCo&gt;</div>
</div><!-- fragment --><p><code>&lt;absolute path to MuJoCo&gt;</code> is the path to the root directory of MuJoCo. For example, <code>${HOME}/.mujoco/mujoco-2.3.5</code> if you installed MuJoCo from release, or <code>${HOME}/src/mujoco</code> if you installed it from source.</p>
<p>Add <code>source ${HOME}/ros/ws_mujoco/devel/setup.bash</code> to <code>${HOME}/.bashrc</code>.</p>
<h1>Examples</h1>
<p>Assume that MuJoCo is installed in <code>${HOME}/.mujoco/mujoco-2.3.5</code> from release, and the path to the catkin workspace is <code>${HOME}/ros/ws_mujoco</code>. </p><div class="fragment"><div class="line"># Terminal 1</div>
<div class="line">$ cp ${HOME}/ros/ws_mujoco/devel/lib/libMujocoRosUtilsPlugin.so ${HOME}/.mujoco/mujoco-2.3.5/bin/mujoco_plugin</div>
<div class="line">$ cd ${HOME}/.mujoco/mujoco-2.3.5/bin</div>
<div class="line">$ ./simulate `rospack find mujoco_ros_utils`/xml/sample_mujoco_ros_utils.xml</div>
<div class="line"># Terminal 2</div>
<div class="line">$ roslaunch mujoco_ros_utils display.launch</div>
</div><!-- fragment --><p>To visualize a point cloud restored from a depth image, add the <code>points:=true</code> option to <code>display.launch</code>. (<code>ros-${ROS_DISTRO}-depth-image-proc</code> must be installed.)</p>
<h1>Plugins</h1>
<h2><a class="el" href="classMujocoRosUtils_1_1ClockPublisher.html" title="Plugin to publish clock topic.">MujocoRosUtils::ClockPublisher</a></h2>
<p>Plugin to publish clock topic.</p>
<p>All of the following attributes are optional.</p><ul>
<li><code>topic_name</code>: Topic name of clock. (Default is <code>/clock</code>)</li>
<li><code>publish_rate</code>: Publish rate. (Default is 100.0 [Hz])</li>
<li><code>use_sim_time</code>: Value of <code>use_sim_time</code> rosparam. (Default is <code>true</code>)</li>
</ul>
<p>An example of tags to be added to the MJCF file: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">extension</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ClockPublisher&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">extension</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">worldbody</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ClockPublisher&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/clock&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;publish_rate&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;100&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;use_sim_time&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">worldbody</span>&gt;</div>
</div><!-- fragment --><p>This plugin must be registered in worldbody.</p>
<h2><a class="el" href="classMujocoRosUtils_1_1PosePublisher.html" title="Plugin to publish topics or broadcast TF of pose and velocity of the body.">MujocoRosUtils::PosePublisher</a></h2>
<p>Plugin to publish topics or broadcast TF of pose and velocity of the body.</p>
<p>All of the following attributes are optional.</p><ul>
<li><code>frame_id</code>: Frame ID of topics header or TF parent. (Default is <code>map</code>)</li>
<li><code>pose_topic_name</code>: Topic name of pose. (Default is <code>mujoco/&lt;body name&gt;/pose</code>)</li>
<li><code>vel_topic_name</code>: Topic name of velocity. (Default is <code>mujoco/&lt;body name&gt;/vel</code>)</li>
<li><code>publish_rate</code>: Publish rate. (Default is 30.0 [Hz])</li>
<li><code>output_tf</code>: Whether to broadcast TF. (Default is <code>false</code>)</li>
<li><code>tf_child_frame_id</code>: Child frame ID for TF. Used only when <code>output_tf</code> is <code>true</code>. (Default is <code>&lt;body name&gt;</code>)</li>
</ul>
<p>An example of tags to be added to the MJCF file: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">extension</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::PosePublisher&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">extension</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">sensor</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;pose_publisher&quot;</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::PosePublisher&quot;</span> <span class="keyword">objtype</span>=<span class="stringliteral">&quot;xbody&quot;</span> <span class="keyword">objname</span>=<span class="stringliteral">&quot;object&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;frame_id&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;map&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;pose_topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/pose&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;vel_topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/vel&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;publish_rate&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;30&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;output_tf&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;false&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;tf_child_frame_id&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;object&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">sensor</span>&gt;</div>
</div><!-- fragment --><p>The <code>objtype</code> attribute must be <code>xbody</code>.</p>
<h2><a class="el" href="classMujocoRosUtils_1_1ExternalForce.html" title="Plugin to apply external force.">MujocoRosUtils::ExternalForce</a></h2>
<p>Plugin to apply external force to the body.</p>
<p>All of the following attributes are optional.</p><ul>
<li><code>topic_name</code>: Topic name of external force. (Default is <code>/external_force</code>)</li>
<li><code>vis_scale</code>: Arrow length scale. (Default is 0.1)</li>
</ul>
<p>An example of tags to be added to the MJCF file: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">extension</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ExternalForce&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">extension</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">worldbody</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">body</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;object&quot;</span> <span class="keyword">pos</span>=<span class="stringliteral">&quot;0 0 1&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">freejoint</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">geom</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;box&quot;</span> <span class="keyword">size</span>=<span class="stringliteral">&quot;0.2 0.2 0.05&quot;</span> <span class="keyword">mass</span>=<span class="stringliteral">&quot;0.1&quot;</span> <span class="keyword">rgba</span>=<span class="stringliteral">&quot;0.5 0.5 0.5 0.3&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ExternalForce&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/external_force&quot;</span>/&gt;</div>
<div class="line">      &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;vis_scale&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;0.1&quot;</span>/&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">body</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">worldbody</span>&gt;</div>
</div><!-- fragment --><h2><a class="el" href="classMujocoRosUtils_1_1ImagePublisher.html" title="Plugin to publish topics of color and depth images.">MujocoRosUtils::ImagePublisher</a></h2>
<p>Plugin to publish topics of color and depth images.</p>
<p>All of the following attributes are optional.</p><ul>
<li><code>frame_id</code>: Frame ID of topics header or TF parent. (Default is <code>&lt;camera name&gt;</code>)</li>
<li><code>color_topic_name</code>: Topic name of color image. (Default is <code>mujoco/&lt;camera name&gt;/color</code>)</li>
<li><code>depth_topic_name</code>: Topic name of depth image. (Default is <code>mujoco/&lt;camera name&gt;/depth</code>)</li>
<li><code>info_topic_name</code>: Topic name of camera information. (Default is <code>mujoco/&lt;camera name&gt;/camera_info</code>)</li>
<li><code>height</code>: Image height. (Default is 240)</li>
<li><code>width</code>: Image width. (Default is 320)</li>
<li><code>publish_rate</code>: Publish rate. (Default is 30.0 [Hz])</li>
</ul>
<p>An example of tags to be added to the MJCF file: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">extension</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ImagePublisher&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">extension</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">sensor</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;image_publisher&quot;</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ImagePublisher&quot;</span> <span class="keyword">objtype</span>=<span class="stringliteral">&quot;camera&quot;</span> <span class="keyword">objname</span>=<span class="stringliteral">&quot;camera&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;frame_id&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;camera&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;color_topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/image/color&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;depth_topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/image/depth&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;info_topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/image/camera_info&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;height&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;240&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;width&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;320&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;publish_rate&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;30&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">sensor</span>&gt;</div>
</div><!-- fragment --><p>The <code>objtype</code> attribute must be <code>camera</code>.</p>
<h2><a class="el" href="classMujocoRosUtils_1_1ActuatorCommand.html" title="Plugin to send a command to an actuator via ROS topic.">MujocoRosUtils::ActuatorCommand</a></h2>
<p>Plugin to send a command to an actuator via ROS topic.</p>
<p>The following attributes are required.</p><ul>
<li><code>actuator_name</code>: Actuator name to which the command is sent.</li>
<li><code>topic_name</code>: Topic name of actuator command. (Default is <code>mujoco/&lt;actuator name&gt;</code>)</li>
</ul>
<p>An example of tags to be added to the MJCF file: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">extension</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ActuatorCommand&quot;</span>/&gt;</div>
<div class="line">&lt;/<span class="keywordtype">extension</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">actuator</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">plugin</span> <span class="keyword">plugin</span>=<span class="stringliteral">&quot;MujocoRosUtils::ActuatorCommand&quot;</span> <span class="keyword">joint</span>=<span class="stringliteral">&quot;camera_pan&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;actuator_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;camera_pan&quot;</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">config</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;topic_name&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;/camera_pan&quot;</span>/&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">plugin</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">actuator</span>&gt;</div>
</div><!-- fragment --><p>In the <code>plugin</code> element, you need to specify the <code>joint</code>, <code>body</code>, etc. of the actuator to be controlled. This information is not used in the plugin, but is necessary to avoid errors in MJCF parsing.</p>
<p>The plugin itself is also added to the list of actuators, but it is a dummy actuator. The unwanted increase in the number of actuators (which also increases the dimension of <code>d-&gt;ctrl</code>) is a problem that should be solved in the future. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
